{
  "pluginType": "JS",
  "pluginId": "js-plugin",
  "unpublishedAction": {
    "name": "addProduct",
    "fullyQualifiedName": "productsAll.addProduct",
    "datasource": {
      "name": "UNUSED_DATASOURCE",
      "pluginId": "js-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "Products",
    "collectionId": "Products_productsAll",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "(amount, price) => {\n  let orders = {};\n  orders[\"amount\"] = amount;\n  orders[\"price\"] = price.text;\n  orders[\"product_id\"] = appsmith.store.pId;\n  if (appsmith.store.orders === undefined) {\n    orders[\"totalPrice\"] = 0;\n    insertOrders.run((res, orders) => {\n      storeValue(\"order_id\", res[0].order_id);\n      orders[\"totalPrice\"] += parseInt(orders[\"amount\"]) * parseFloat(orders[\"price\"]);\n      insertOrderProduct.run(() => {\n        showAlert('เพิ่มสำเร็จ');\n        closeModal('modalProducts');\n      });\n    }, () => {});\n    storeValue(\"orders\", orders);\n  } else {\n    orders[\"totalPrice\"] = parseInt(orders[\"amount\"]) * parseFloat(orders[\"price\"]);\n    storeValue(\"orders\", orders);\n    getOrderProduct.run();\n    let op = getOrderProduct.data;\n    if (op !== undefined) {\n      if (op.length > 0) {\n        updateOrderProduct.run(() => {\n          showAlert('update สำเร็จ');\n          closeModal('modalProducts');\n          getOrders.run();\n        });\n      } else {\n        insertOrderProduct.run(() => {\n          showAlert('เพิ่มสำเร็จ');\n          closeModal('modalProducts');\n          getOrders.run();\n        });\n      }\n    }\n  }\n}",
      "selfReferencingDataPaths": [],
      "jsArguments": [
        {},
        {}
      ],
      "isAsync": false
    },
    "executeOnLoad": false,
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [
      "(amount, price) => {\n  let orders = {};\n  orders[\"amount\"] = amount;\n  orders[\"price\"] = price.text;\n  orders[\"product_id\"] = appsmith.store.pId;\n  if (appsmith.store.orders === undefined) {\n    orders[\"totalPrice\"] = 0;\n    insertOrders.run((res, orders) => {\n      storeValue(\"order_id\", res[0].order_id);\n      orders[\"totalPrice\"] += parseInt(orders[\"amount\"]) * parseFloat(orders[\"price\"]);\n      insertOrderProduct.run(() => {\n        showAlert('เพิ่มสำเร็จ');\n        closeModal('modalProducts');\n      });\n    }, () => {});\n    storeValue(\"orders\", orders);\n  } else {\n    orders[\"totalPrice\"] = parseInt(orders[\"amount\"]) * parseFloat(orders[\"price\"]);\n    storeValue(\"orders\", orders);\n    getOrderProduct.run();\n    let op = getOrderProduct.data;\n    if (op !== undefined) {\n      if (op.length > 0) {\n        updateOrderProduct.run(() => {\n          showAlert('update สำเร็จ');\n          closeModal('modalProducts');\n          getOrders.run();\n        });\n      } else {\n        insertOrderProduct.run(() => {\n          showAlert('เพิ่มสำเร็จ');\n          closeModal('modalProducts');\n          getOrders.run();\n        });\n      }\n    }\n  }\n}"
    ],
    "userSetOnLoad": false,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "Products_productsAll.addProduct",
  "deleted": false,
  "gitSyncId": "636c92fc03193515321c8396_63b55f3e0bc0a80b3001a839"
}